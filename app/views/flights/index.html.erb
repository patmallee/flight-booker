<h1>Flight Search</h1>
<div class="search container">
  <%= form_for @flight, url: root_url, method: :get do |f| %>
    <%= f.label :from_airport_id %>
    <%= f.select(:from_airport_id, options_for_select(@airports)) %><br>
    
    <%= f.label :to_airport_id %>
    <%= f.select(:to_airport_id, options_for_select(@airports)) %><br>
    
    <%= f.fields_for :passengers do |p| %>
      <%= p.label :count %>
      <%= p.select(:count, options_for_select([['1',1],['2',2],['3',3],['4',4]])) %><br>
    <% end %>
    
    <%= f.label :depart_time %>
    <%= f.select(:depart_time, options_for_select(@departures)) %><br>
    
    <%= f.submit "Search" %>
  <% end %>
</div>

<p><%= @boobs %></p>

<% unless @search_results.nil? %>
  <div style="margin: 0 30px; padding: 0 0 0 10px; box-shadow: 0 0 3px 3px #aaa; border-radius: 4px">
    <h2>Search Results --- Passengers: <%= @passenger_count %></h2>
    
    <%= form_for @flight do |f| %>
      
      <%= fields_for :booking do |b| %>
        <% @search_results.each do |flight| %>
          <%= b.radio_button(:selection, flight.id) %>
          <div style="float:right">
            <h3>Departing: <%= flight.depart_time.strftime("%b %d, %Y - %l:%M %P") %></h3>
            <p><strong>Route:</strong> <%= flight.from_airport.code %>-<%= flight.to_airport.code %></p>
          </div>
        <% end %>
      <% end %>
      
      <%= f.submit "Book Flight" %>
      
    <% end %>
    
<% end %>
</div>